<h1>Redux Toolkit</h1>

<p> Під час використання бібліотеки Redux є три основні проблеми:

Надмірно складний процес налаштування стора
Необхідність встановлення стандартного набору додаткових бібліотек для розширення можливостей Redux
Великий обсяг шаблонного коду створення екшенів, редюсерів тощо.
Redux Toolkit - це офіційна бібліотека для ефективної розробки з використанням Redux, яка призначена для стандартизації та спрощення написання логіки Redux. </p>

<h3>Встановлення</h3>

Redux Toolkit встановлюється як стандартний NPM пакет.

<h4 style="color:blue">npm install @reduxjs/toolkit</h4>

Використовуючи Redux Toolkit, немає необхідності додавати в проект пакет redux, крім випадків, коли вам необхідна функція combineReducers(). Достатньо встановити @reduxjs/toolkit для написання логіки Redux та react-redux для зв'язку стора з компонентами.

<h4>npm install @reduxjs/toolkit react-redux</h4>

Якщо ви ініціалізуєте створення стартових файлів програми, використовуючи Create React App, без попередньо заготовленого шаблону проекту, як наприклад для домашніх робіт, у такому разі варто використовувати офіційний шаблон. Для цього команді npx create-react-app потрібно передати прапор --template зі значенням redux.

<h4>npx create-react-app my-app --template redux</h4>


<h3>configureStore</h3>

Redux Toolkit надає функцію configureStore(options), яка обертає оригінальний createStore(), єдиним аргументом очікує об'єкт параметрів та налаштовує деякі корисні інструменти розробки як частина процесу створення стора.

<h3>createAction</h3>

Функція createAction(type) спрощує процес оголошення екшенів. В якості аргументу вона приймає рядок який описує тип дії та повертає генератор екшену.

<h3>createReducer</h3>

Будь-який редюсер отримує стан Redux і екшен, перевіряє тип екшену всередині інструкції switch і виконує відповідну логіку оновлення стану для даного екшену. До того ж, редюсер визначає початкове значення стану та повертає отриманий стан, якщо не повинен обробляти екшен. Цей спосіб вимагає занадто багато шаблонного коду і схильний до помилок. Функція createReducer() спрощує процес оголошення редюсерів.

createReducer(initialState, actionsMap)

Першим аргументом вона чекає на початковий стан редюсера, а на другий об'єкт властивостей спеціального формату, де кожен ключ це тип екшену, а значення – це функція-редюсер цього типу. Тобто кожен case стає ключем об'єкта, для якого пишеться власний міні-редюсер.

Синтаксис обчислюваних властивостей об'єкта призводить значення до рядка, тому можна просто використовувати ім'я функції без вказівки властивості type, адже метод toString() генератора екшену було перевизначено так, щоб повертати тип екшену.

Приклад у  src/redux/reducer.js

<h3>Бібліотека Immer</h3>

Redux Toolkit «під капотом» використовує бібліотеку Immer, яка значно спрощує логіку роботи зі станом, дозволяючи нам писати код оновлення стану в редюсері так, ніби ми безпосередньо змінювали стан. Насправді редюсери отримують копію стану, а Immer перетворює всі мутації на еквівалентні операції оновлення.

Один із підводних каменів бібліотеки Immer полягає в тому, що в коді одного редюсера можна лише або мутувати стан, або повернути оновлений, але не те й інше водночас.

<h3>createSlice</h3>

При проектуванні структура стану Redux ділиться на слайси (slice, частина), за кожен із яких відповідає окремий редюсер. У нашому додатку планувальника задач є два слайси - завдання (tasks) та фільтри (filters).

Функція createSlice() це надбудова над createAction() та createReducer(), яка стандартизує та ще більше спрощує оголошення слайсу.

<h3>Вміст payload</h3>

Генератор екшену addTask очікує лише рядок з текстом завдання, після чого змінює значення payload використовуючи функцію підготовки екшену. 

